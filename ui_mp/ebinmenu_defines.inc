// if these change, ensure that ebinmenu\permissions::init is also updated
#define PERMISSION_LEVEL_STANDARD 1
#define PERMISSION_LEVEL_VIP      5
#define PERMISSION_LEVEL_ADMIN    10
#define PERMISSION_LEVEL_HOST     99

#define EBINMENU_ICON "cardicon_iwlogo"

#define RESET_UI_DVARS \
	setDvar "ui_ebinmenu_time_remaining" 100; \
	setLocalVarBool "ui_ebinmenu_showguid" 0;

#include "ui/menudef.h"
#include "ui_mp/main.inc"

//#include "ui_mp/leftside_options.inc" //contains extra items and must be loaded into the menudef
//#define CHOICE_Y(i)            (28 + (i * 20)) //defined in pc_options.inc
#define LEFT_CHOICE_ORIGIN(i)  -64 CHOICE_Y(i)
#define LEFT_CHOICE_RECT(i)    LEFT_CHOICE_ORIGIN(i) 336 20 HORIZONTAL_ALIGN_LEFT VERTICAL_ALIGN_TOP

#include "ui_mp/pc_options.inc"

#define BACKGROUND_PIECE(SHADER, ALPHA, EXTRA) \
	itemDef { \
		rect 0 0 640 480 4 4 \
		style WINDOW_STYLE_SHADER \
		decoration \
		visible 1 \
		background SHADER \
		forecolor 1 1 1 ALPHA \
		textscale 0.55 \
		EXTRA \
	}

// LEFT

#define LEFT_MENU_ITEM(MENU_OFFSET, MENU_NAME, PERMISSION_LEVEL_REQUIRED) \
	itemDef { \
		name MENU_NAME \
		rect LEFT_CHOICE_RECT(MENU_OFFSET) \
		style WINDOW_STYLE_FILLED \
		visible 1 \
		foreColor COLOR_FOCUSED \
		disableColor 0.6 0.55 0.55 1 \
		background "menu_button_selection_bar" \
		type ITEM_TYPE_BUTTON \
		group "left_menu_item" \
		textFont 3 \
		textAlign ITEM_ALIGN_TOP_RIGHT \
		textAlignx -60 \
		textScale FONTSCALE_SMALL \
		exp text ( locstring("@EBIN_MENU_" + MENU_NAME + "_TITLE") ) \
		visible when ( dvarint("ui_ebinmenu_permission") >= PERMISSION_LEVEL_REQUIRED ) \
		disabled when ( localvarstring( "ui_ebinmenu_menu" ) == MENU_NAME ) \
		action \
		{ \
			play "mouse_click"; \
			RESET_UI_DVARS \
			setLocalVarString "ui_ebinmenu_menu" ( MENU_NAME ); \
		} \
		onFocus \
		{ \
			play "mouse_over"; \
			setItemColor self backcolor 0 0 0 1; \
			setLocalVarString "ui_ebinmenu_hint_text" ( locstring("@EBIN_MENU_" + MENU_NAME + "_HINT") ); \
		} \
		leaveFocus \
		{ \
			setItemColor self backcolor 0 0 0 "0.0"; \
			setLocalVarString "ui_ebinmenu_hint_text" ( "@NULL_EMPTY" ); \
		} \
	}

#define LEFT_MENU_SEPARATOR(MENU_OFFSET, PERMISSION_LEVEL_REQUIRED) \
	itemDef { \
		rect 0 CHOICE_Y(MENU_OFFSET) 216 1 HORIZONTAL_ALIGN_LEFT VERTICAL_ALIGN_TOP \
		style WINDOW_STYLE_SHADER \
		decoration \
		visible 1 \
		foreColor 1 1 1 0.5 \
		background "gradient_fadein" \
		visible when ( dvarint("ui_ebinmenu_permission") >= PERMISSION_LEVEL_REQUIRED ) \
	}

// RIGHT

#define SELECTED_AND_PERMISSION_GRANTED(MENU_NAME, PERMISSION_LEVEL_REQUIRED) \
	localvarstring("ui_ebinmenu_menu") == MENU_NAME && dvarint("ui_ebinmenu_permission") >= PERMISSION_LEVEL_REQUIRED

#define EXECUTE_FUNCTION_WITH_DVAR_VALUE_LINE(DVAR_NAME, MENU_NAME, FUNCTION_NAME, STR) \
	if(dvarstring(DVAR_NAME) == STR) { scriptmenuresponse MENU_NAME ## "|" ## FUNCTION_NAME ## "|" ## STR }

#define EXECUTE_FUNCTION_WITH_DVAR_VALUE(DVAR_NAME, MENU_NAME, FUNCTION_NAME) \
	EXECUTE_FUNCTION_WITH_DVAR_VALUE_LINE(DVAR_NAME, MENU_NAME, FUNCTION_NAME, "0") EXECUTE_FUNCTION_WITH_DVAR_VALUE_LINE(DVAR_NAME, MENU_NAME, FUNCTION_NAME, "1") EXECUTE_FUNCTION_WITH_DVAR_VALUE_LINE(DVAR_NAME, MENU_NAME, FUNCTION_NAME, "2") EXECUTE_FUNCTION_WITH_DVAR_VALUE_LINE(DVAR_NAME, MENU_NAME, FUNCTION_NAME, "3") EXECUTE_FUNCTION_WITH_DVAR_VALUE_LINE(DVAR_NAME, MENU_NAME, FUNCTION_NAME, "4") EXECUTE_FUNCTION_WITH_DVAR_VALUE_LINE(DVAR_NAME, MENU_NAME, FUNCTION_NAME, "5") EXECUTE_FUNCTION_WITH_DVAR_VALUE_LINE(DVAR_NAME, MENU_NAME, FUNCTION_NAME, "6") EXECUTE_FUNCTION_WITH_DVAR_VALUE_LINE(DVAR_NAME, MENU_NAME, FUNCTION_NAME, "7") EXECUTE_FUNCTION_WITH_DVAR_VALUE_LINE(DVAR_NAME, MENU_NAME, FUNCTION_NAME, "8") EXECUTE_FUNCTION_WITH_DVAR_VALUE_LINE(DVAR_NAME, MENU_NAME, FUNCTION_NAME, "9") EXECUTE_FUNCTION_WITH_DVAR_VALUE_LINE(DVAR_NAME, MENU_NAME, FUNCTION_NAME, "10") EXECUTE_FUNCTION_WITH_DVAR_VALUE_LINE(DVAR_NAME, MENU_NAME, FUNCTION_NAME, "11") EXECUTE_FUNCTION_WITH_DVAR_VALUE_LINE(DVAR_NAME, MENU_NAME, FUNCTION_NAME, "12") EXECUTE_FUNCTION_WITH_DVAR_VALUE_LINE(DVAR_NAME, MENU_NAME, FUNCTION_NAME, "13") EXECUTE_FUNCTION_WITH_DVAR_VALUE_LINE(DVAR_NAME, MENU_NAME, FUNCTION_NAME, "14") EXECUTE_FUNCTION_WITH_DVAR_VALUE_LINE(DVAR_NAME, MENU_NAME, FUNCTION_NAME, "15") EXECUTE_FUNCTION_WITH_DVAR_VALUE_LINE(DVAR_NAME, MENU_NAME, FUNCTION_NAME, "16") EXECUTE_FUNCTION_WITH_DVAR_VALUE_LINE(DVAR_NAME, MENU_NAME, FUNCTION_NAME, "17") EXECUTE_FUNCTION_WITH_DVAR_VALUE_LINE(DVAR_NAME, MENU_NAME, FUNCTION_NAME, "18") EXECUTE_FUNCTION_WITH_DVAR_VALUE_LINE(DVAR_NAME, MENU_NAME, FUNCTION_NAME, "19") EXECUTE_FUNCTION_WITH_DVAR_VALUE_LINE(DVAR_NAME, MENU_NAME, FUNCTION_NAME, "20") EXECUTE_FUNCTION_WITH_DVAR_VALUE_LINE(DVAR_NAME, MENU_NAME, FUNCTION_NAME, "21") EXECUTE_FUNCTION_WITH_DVAR_VALUE_LINE(DVAR_NAME, MENU_NAME, FUNCTION_NAME, "22") EXECUTE_FUNCTION_WITH_DVAR_VALUE_LINE(DVAR_NAME, MENU_NAME, FUNCTION_NAME, "23") EXECUTE_FUNCTION_WITH_DVAR_VALUE_LINE(DVAR_NAME, MENU_NAME, FUNCTION_NAME, "24") EXECUTE_FUNCTION_WITH_DVAR_VALUE_LINE(DVAR_NAME, MENU_NAME, FUNCTION_NAME, "25") EXECUTE_FUNCTION_WITH_DVAR_VALUE_LINE(DVAR_NAME, MENU_NAME, FUNCTION_NAME, "26") EXECUTE_FUNCTION_WITH_DVAR_VALUE_LINE(DVAR_NAME, MENU_NAME, FUNCTION_NAME, "27") EXECUTE_FUNCTION_WITH_DVAR_VALUE_LINE(DVAR_NAME, MENU_NAME, FUNCTION_NAME, "28") EXECUTE_FUNCTION_WITH_DVAR_VALUE_LINE(DVAR_NAME, MENU_NAME, FUNCTION_NAME, "29") EXECUTE_FUNCTION_WITH_DVAR_VALUE_LINE(DVAR_NAME, MENU_NAME, FUNCTION_NAME, "30") EXECUTE_FUNCTION_WITH_DVAR_VALUE_LINE(DVAR_NAME, MENU_NAME, FUNCTION_NAME, "31") EXECUTE_FUNCTION_WITH_DVAR_VALUE_LINE(DVAR_NAME, MENU_NAME, FUNCTION_NAME, "32") EXECUTE_FUNCTION_WITH_DVAR_VALUE_LINE(DVAR_NAME, MENU_NAME, FUNCTION_NAME, "33") EXECUTE_FUNCTION_WITH_DVAR_VALUE_LINE(DVAR_NAME, MENU_NAME, FUNCTION_NAME, "34") EXECUTE_FUNCTION_WITH_DVAR_VALUE_LINE(DVAR_NAME, MENU_NAME, FUNCTION_NAME, "35") EXECUTE_FUNCTION_WITH_DVAR_VALUE_LINE(DVAR_NAME, MENU_NAME, FUNCTION_NAME, "36") EXECUTE_FUNCTION_WITH_DVAR_VALUE_LINE(DVAR_NAME, MENU_NAME, FUNCTION_NAME, "37") EXECUTE_FUNCTION_WITH_DVAR_VALUE_LINE(DVAR_NAME, MENU_NAME, FUNCTION_NAME, "38") EXECUTE_FUNCTION_WITH_DVAR_VALUE_LINE(DVAR_NAME, MENU_NAME, FUNCTION_NAME, "39") EXECUTE_FUNCTION_WITH_DVAR_VALUE_LINE(DVAR_NAME, MENU_NAME, FUNCTION_NAME, "40") EXECUTE_FUNCTION_WITH_DVAR_VALUE_LINE(DVAR_NAME, MENU_NAME, FUNCTION_NAME, "41") EXECUTE_FUNCTION_WITH_DVAR_VALUE_LINE(DVAR_NAME, MENU_NAME, FUNCTION_NAME, "42") EXECUTE_FUNCTION_WITH_DVAR_VALUE_LINE(DVAR_NAME, MENU_NAME, FUNCTION_NAME, "43") EXECUTE_FUNCTION_WITH_DVAR_VALUE_LINE(DVAR_NAME, MENU_NAME, FUNCTION_NAME, "44") EXECUTE_FUNCTION_WITH_DVAR_VALUE_LINE(DVAR_NAME, MENU_NAME, FUNCTION_NAME, "45") EXECUTE_FUNCTION_WITH_DVAR_VALUE_LINE(DVAR_NAME, MENU_NAME, FUNCTION_NAME, "46") EXECUTE_FUNCTION_WITH_DVAR_VALUE_LINE(DVAR_NAME, MENU_NAME, FUNCTION_NAME, "47") EXECUTE_FUNCTION_WITH_DVAR_VALUE_LINE(DVAR_NAME, MENU_NAME, FUNCTION_NAME, "48") EXECUTE_FUNCTION_WITH_DVAR_VALUE_LINE(DVAR_NAME, MENU_NAME, FUNCTION_NAME, "49") EXECUTE_FUNCTION_WITH_DVAR_VALUE_LINE(DVAR_NAME, MENU_NAME, FUNCTION_NAME, "50") EXECUTE_FUNCTION_WITH_DVAR_VALUE_LINE(DVAR_NAME, MENU_NAME, FUNCTION_NAME, "51") EXECUTE_FUNCTION_WITH_DVAR_VALUE_LINE(DVAR_NAME, MENU_NAME, FUNCTION_NAME, "52") EXECUTE_FUNCTION_WITH_DVAR_VALUE_LINE(DVAR_NAME, MENU_NAME, FUNCTION_NAME, "53") EXECUTE_FUNCTION_WITH_DVAR_VALUE_LINE(DVAR_NAME, MENU_NAME, FUNCTION_NAME, "54") EXECUTE_FUNCTION_WITH_DVAR_VALUE_LINE(DVAR_NAME, MENU_NAME, FUNCTION_NAME, "55") EXECUTE_FUNCTION_WITH_DVAR_VALUE_LINE(DVAR_NAME, MENU_NAME, FUNCTION_NAME, "56") EXECUTE_FUNCTION_WITH_DVAR_VALUE_LINE(DVAR_NAME, MENU_NAME, FUNCTION_NAME, "57") EXECUTE_FUNCTION_WITH_DVAR_VALUE_LINE(DVAR_NAME, MENU_NAME, FUNCTION_NAME, "58") EXECUTE_FUNCTION_WITH_DVAR_VALUE_LINE(DVAR_NAME, MENU_NAME, FUNCTION_NAME, "59") EXECUTE_FUNCTION_WITH_DVAR_VALUE_LINE(DVAR_NAME, MENU_NAME, FUNCTION_NAME, "60") EXECUTE_FUNCTION_WITH_DVAR_VALUE_LINE(DVAR_NAME, MENU_NAME, FUNCTION_NAME, "61") EXECUTE_FUNCTION_WITH_DVAR_VALUE_LINE(DVAR_NAME, MENU_NAME, FUNCTION_NAME, "62") EXECUTE_FUNCTION_WITH_DVAR_VALUE_LINE(DVAR_NAME, MENU_NAME, FUNCTION_NAME, "63") EXECUTE_FUNCTION_WITH_DVAR_VALUE_LINE(DVAR_NAME, MENU_NAME, FUNCTION_NAME, "64") EXECUTE_FUNCTION_WITH_DVAR_VALUE_LINE(DVAR_NAME, MENU_NAME, FUNCTION_NAME, "65") EXECUTE_FUNCTION_WITH_DVAR_VALUE_LINE(DVAR_NAME, MENU_NAME, FUNCTION_NAME, "66") EXECUTE_FUNCTION_WITH_DVAR_VALUE_LINE(DVAR_NAME, MENU_NAME, FUNCTION_NAME, "67") EXECUTE_FUNCTION_WITH_DVAR_VALUE_LINE(DVAR_NAME, MENU_NAME, FUNCTION_NAME, "68") EXECUTE_FUNCTION_WITH_DVAR_VALUE_LINE(DVAR_NAME, MENU_NAME, FUNCTION_NAME, "69") EXECUTE_FUNCTION_WITH_DVAR_VALUE_LINE(DVAR_NAME, MENU_NAME, FUNCTION_NAME, "70") EXECUTE_FUNCTION_WITH_DVAR_VALUE_LINE(DVAR_NAME, MENU_NAME, FUNCTION_NAME, "71") EXECUTE_FUNCTION_WITH_DVAR_VALUE_LINE(DVAR_NAME, MENU_NAME, FUNCTION_NAME, "72") EXECUTE_FUNCTION_WITH_DVAR_VALUE_LINE(DVAR_NAME, MENU_NAME, FUNCTION_NAME, "73") EXECUTE_FUNCTION_WITH_DVAR_VALUE_LINE(DVAR_NAME, MENU_NAME, FUNCTION_NAME, "74") EXECUTE_FUNCTION_WITH_DVAR_VALUE_LINE(DVAR_NAME, MENU_NAME, FUNCTION_NAME, "75") EXECUTE_FUNCTION_WITH_DVAR_VALUE_LINE(DVAR_NAME, MENU_NAME, FUNCTION_NAME, "76") EXECUTE_FUNCTION_WITH_DVAR_VALUE_LINE(DVAR_NAME, MENU_NAME, FUNCTION_NAME, "77") EXECUTE_FUNCTION_WITH_DVAR_VALUE_LINE(DVAR_NAME, MENU_NAME, FUNCTION_NAME, "78") EXECUTE_FUNCTION_WITH_DVAR_VALUE_LINE(DVAR_NAME, MENU_NAME, FUNCTION_NAME, "79") EXECUTE_FUNCTION_WITH_DVAR_VALUE_LINE(DVAR_NAME, MENU_NAME, FUNCTION_NAME, "80") EXECUTE_FUNCTION_WITH_DVAR_VALUE_LINE(DVAR_NAME, MENU_NAME, FUNCTION_NAME, "81") EXECUTE_FUNCTION_WITH_DVAR_VALUE_LINE(DVAR_NAME, MENU_NAME, FUNCTION_NAME, "82") EXECUTE_FUNCTION_WITH_DVAR_VALUE_LINE(DVAR_NAME, MENU_NAME, FUNCTION_NAME, "83") EXECUTE_FUNCTION_WITH_DVAR_VALUE_LINE(DVAR_NAME, MENU_NAME, FUNCTION_NAME, "84") EXECUTE_FUNCTION_WITH_DVAR_VALUE_LINE(DVAR_NAME, MENU_NAME, FUNCTION_NAME, "85") EXECUTE_FUNCTION_WITH_DVAR_VALUE_LINE(DVAR_NAME, MENU_NAME, FUNCTION_NAME, "86") EXECUTE_FUNCTION_WITH_DVAR_VALUE_LINE(DVAR_NAME, MENU_NAME, FUNCTION_NAME, "87") EXECUTE_FUNCTION_WITH_DVAR_VALUE_LINE(DVAR_NAME, MENU_NAME, FUNCTION_NAME, "88") EXECUTE_FUNCTION_WITH_DVAR_VALUE_LINE(DVAR_NAME, MENU_NAME, FUNCTION_NAME, "89") EXECUTE_FUNCTION_WITH_DVAR_VALUE_LINE(DVAR_NAME, MENU_NAME, FUNCTION_NAME, "90") EXECUTE_FUNCTION_WITH_DVAR_VALUE_LINE(DVAR_NAME, MENU_NAME, FUNCTION_NAME, "91") EXECUTE_FUNCTION_WITH_DVAR_VALUE_LINE(DVAR_NAME, MENU_NAME, FUNCTION_NAME, "92") EXECUTE_FUNCTION_WITH_DVAR_VALUE_LINE(DVAR_NAME, MENU_NAME, FUNCTION_NAME, "93") EXECUTE_FUNCTION_WITH_DVAR_VALUE_LINE(DVAR_NAME, MENU_NAME, FUNCTION_NAME, "94") EXECUTE_FUNCTION_WITH_DVAR_VALUE_LINE(DVAR_NAME, MENU_NAME, FUNCTION_NAME, "95") EXECUTE_FUNCTION_WITH_DVAR_VALUE_LINE(DVAR_NAME, MENU_NAME, FUNCTION_NAME, "96") EXECUTE_FUNCTION_WITH_DVAR_VALUE_LINE(DVAR_NAME, MENU_NAME, FUNCTION_NAME, "97") EXECUTE_FUNCTION_WITH_DVAR_VALUE_LINE(DVAR_NAME, MENU_NAME, FUNCTION_NAME, "98") EXECUTE_FUNCTION_WITH_DVAR_VALUE_LINE(DVAR_NAME, MENU_NAME, FUNCTION_NAME, "99") EXECUTE_FUNCTION_WITH_DVAR_VALUE_LINE(DVAR_NAME, MENU_NAME, FUNCTION_NAME, "100")

#define MENU_CYCLE_DVAR(MENU_OFFSET, MENU_NAME, PERMISSION_LEVEL_REQUIRED, OPTION_TEXT, DVAR_NAME, HINT_TEXT, STR_LIST, ACTION) \
	itemDef { \
		rect CHOICE_RECT(MENU_OFFSET) \
		style WINDOW_STYLE_FILLED \
		foreColor CHOICE_TEXTCOLOR \
		disableColor 0.6 0.55 0.55 1 \
		background "menu_setting_selection_bar" \
		type ITEM_TYPE_MULTI \
		dvar DVAR_NAME \
		dvarStrList	STR_LIST \
		textFont UI_FONT_SMALL \
		textAlign ITEM_ALIGN_TOP_LEFT \
		textAlignX 170 \
		textScale CHOICE_TEXTSIZE \
		visible	when(SELECTED_AND_PERMISSION_GRANTED(MENU_NAME, PERMISSION_LEVEL_REQUIRED)) \
		mouseEnter \
		{ \
			play CHOICE_FOCUS_SOUND; \
		} \
		onFocus \
		{ \
			setItemColor self backColor 0 0 0 1; \
			setLocalVarString ui_ebinmenu_hint_text HINT_TEXT; \
		} \
		leaveFocus \
		{ \
			setItemColor self backColor 0 0 0 0; \
			setLocalVarString ui_ebinmenu_hint_text "@NULL_EMPTY"; \
		} \
		action \
		{ \
			play CHOICE_CLICK_SOUND; \
			ACTION \
		} \
	} \
	PC_OPTIONS_OPTION_LABEL_RAW(MENU_OFFSET, OPTION_TEXT, when(0), when(SELECTED_AND_PERMISSION_GRANTED(MENU_NAME, PERMISSION_LEVEL_REQUIRED)))

#define RIGHT_MENU_TITLE(MENU_NAME, PERMISSION_LEVEL_REQUIRED) \
	itemDef { \
		rect 232 0 344 28 HORIZONTAL_ALIGN_LEFT VERTICAL_ALIGN_TOP \
		foreColor CHOICE_TEXTCOLOR \
		textFont 9 \
		textAlign ITEM_ALIGN_TOP_CENTER \
		textScale 0.5 \
		decoration \
		exp text ( locstring("@EBIN_MENU_" + MENU_NAME + "_TITLE") ) \
		visible	when(SELECTED_AND_PERMISSION_GRANTED(MENU_NAME, PERMISSION_LEVEL_REQUIRED)) \
	}

#define RIGHT_MENU_TEXTDECORATION(MENU_OFFSET, MENU_NAME, PERMISSION_LEVEL_REQUIRED, OPTION_TEXT, OPTION_VALUE) \
	PC_OPTIONS_OPTION_LABEL_RAW(MENU_OFFSET, OPTION_TEXT, when(0), when(SELECTED_AND_PERMISSION_GRANTED(MENU_NAME, PERMISSION_LEVEL_REQUIRED))) \
	itemDef { \
		rect CHOICE_RECT(MENU_OFFSET) \
		foreColor CHOICE_TEXTCOLOR \
		disableColor 0.6 0.55 0.55 1 \
		textFont UI_FONT_SMALL \
		textAlign ITEM_ALIGN_TOP_LEFT \
		textAlignX 170 \
		textScale CHOICE_TEXTSIZE \
		decoration \
		exp text OPTION_VALUE \
		visible	when(SELECTED_AND_PERMISSION_GRANTED(MENU_NAME, PERMISSION_LEVEL_REQUIRED)) \
	}

#define RIGHT_MENU_SHOWHIDDEN(MENU_OFFSET, MENU_NAME, PERMISSION_LEVEL_REQUIRED, OPTION_TEXT, LOCALVAR_NAME, OPTION_VALUE) \
	itemDef { \
		rect CHOICE_RECT(MENU_OFFSET) \
		style WINDOW_STYLE_FILLED \
		foreColor CHOICE_TEXTCOLOR \
		disableColor 0.6 0.55 0.55 1 \
		background "menu_setting_selection_bar" \
		type ITEM_TYPE_BUTTON \
		text "**HIDDEN**" \
		textFont UI_FONT_SMALL \
		textAlign ITEM_ALIGN_TOP_LEFT \
		textAlignX 170 \
		textScale CHOICE_TEXTSIZE \
		visible	when(SELECTED_AND_PERMISSION_GRANTED(MENU_NAME, PERMISSION_LEVEL_REQUIRED) && localVarBool(LOCALVAR_NAME) == false) \
		mouseEnter \
		{ \
			play CHOICE_FOCUS_SOUND; \
		} \
		onFocus \
		{ \
			setItemColor self backColor 0 0 0 1; \
		} \
		leaveFocus \
		{ \
			setItemColor self backColor 0 0 0 0; \
		} \
		action \
		{ \
			play CHOICE_CLICK_SOUND; \
			setLocalVarBool LOCALVAR_NAME 1; \
		} \
	} \
	PC_OPTIONS_OPTION_LABEL_RAW(MENU_OFFSET, OPTION_TEXT, when(0), when(SELECTED_AND_PERMISSION_GRANTED(MENU_NAME, PERMISSION_LEVEL_REQUIRED))) \
	itemDef { \
		rect CHOICE_RECT(MENU_OFFSET) \
		foreColor CHOICE_TEXTCOLOR \
		disableColor 0.6 0.55 0.55 1 \
		textFont UI_FONT_SMALL \
		textAlign ITEM_ALIGN_TOP_LEFT \
		textAlignX 170 \
		textScale CHOICE_TEXTSIZE \
		decoration \
		exp text OPTION_VALUE \
		visible	when(SELECTED_AND_PERMISSION_GRANTED(MENU_NAME, PERMISSION_LEVEL_REQUIRED) && localVarBool(LOCALVAR_NAME)) \
	}

#define RIGHT_MENU_CYCLEDVAR(MENU_OFFSET, MENU_NAME, PERMISSION_LEVEL_REQUIRED, OPTION_TEXT, DVAR_NAME, FUNCTION_NAME, HINT_TEXT, STR_LIST) \
	RIGHT_MENU_CYCLEDVAR_EX(MENU_OFFSET, MENU_NAME, PERMISSION_LEVEL_REQUIRED, OPTION_TEXT, DVAR_NAME, FUNCTION_NAME, HINT_TEXT, STR_LIST, ;)

#define RIGHT_MENU_CYCLEDVAR_EX(MENU_OFFSET, MENU_NAME, PERMISSION_LEVEL_REQUIRED, OPTION_TEXT, DVAR_NAME, FUNCTION_NAME, HINT_TEXT, STR_LIST, ACTION) \
	MENU_CYCLE_DVAR(MENU_OFFSET, MENU_NAME, PERMISSION_LEVEL_REQUIRED, OPTION_TEXT, DVAR_NAME, HINT_TEXT, STR_LIST, \
		ACTION \
		EXECUTE_FUNCTION_WITH_DVAR_VALUE(DVAR_NAME, MENU_NAME, FUNCTION_NAME) \
	)

//note - say_team forces a player to be associated (not Console), even in FFA
#define RIGHT_MENU_TOGGLEDVARBOOL(MENU_OFFSET, MENU_NAME, PERMISSION_LEVEL_REQUIRED, OPTION_TEXT, DVAR_NAME, FUNCTION_NAME, HINT_TEXT) \
	MENU_CYCLE_DVAR(MENU_OFFSET, MENU_NAME, PERMISSION_LEVEL_REQUIRED, OPTION_TEXT, DVAR_NAME, HINT_TEXT, {"@EBIN_BOOL_0"; "0"; "@EBIN_BOOL_1"; "1";}, \
		if(dvarbool(DVAR_NAME)) { \
			scriptmenuresponse MENU_NAME ## "|" ## FUNCTION_NAME ## "|1" \
		} else { \
			scriptmenuresponse MENU_NAME ## "|" ## FUNCTION_NAME ## "|0" \
		} \
	)

#define RIGHT_MENU_TOGGLEDVARBOOL_INVERTED(MENU_OFFSET, MENU_NAME, PERMISSION_LEVEL_REQUIRED, OPTION_TEXT, DVAR_NAME, FUNCTION_NAME, HINT_TEXT) \
	MENU_CYCLE_DVAR(MENU_OFFSET, MENU_NAME, PERMISSION_LEVEL_REQUIRED, OPTION_TEXT, DVAR_NAME, HINT_TEXT, {"@EBIN_BOOL_1"; "0"; "@EBIN_BOOL_0"; "1";}, \
		if(dvarbool(DVAR_NAME)) { \
			scriptmenuresponse MENU_NAME ## "|" ## FUNCTION_NAME ## "|0" \
		} else { \
			scriptmenuresponse MENU_NAME ## "|" ## FUNCTION_NAME ## "|1" \
		} \
	)

#define RIGHT_MENU_TOGGLEDVARBOOL_INVERT(MENU_OFFSET, MENU_NAME, PERMISSION_LEVEL_REQUIRED, OPTION_TEXT, DVAR_NAME, FUNCTION_NAME, HINT_TEXT) \
	MENU_CYCLE_DVAR(MENU_OFFSET, MENU_NAME, PERMISSION_LEVEL_REQUIRED, OPTION_TEXT, DVAR_NAME, HINT_TEXT, {"@EBIN_BOOL_0"; "0"; "@EBIN_BOOL_1"; "1";}, \
		if(dvarbool(DVAR_NAME)) { \
			scriptmenuresponse MENU_NAME ## "|" ## FUNCTION_NAME ## "|0" \
		} else { \
			scriptmenuresponse MENU_NAME ## "|" ## FUNCTION_NAME ## "|1" \
		} \
	)

//helpers
#define SUB_MENU_TITLE(MENU_OFFSET, MENU_NAME, PERMISSION_LEVEL_REQUIRED) \
	LEFT_MENU_ITEM(MENU_OFFSET, MENU_NAME, MENU_PERMISSION_LEVEL) \
	RIGHT_MENU_TITLE(MENU_NAME, MENU_PERMISSION_LEVEL)
